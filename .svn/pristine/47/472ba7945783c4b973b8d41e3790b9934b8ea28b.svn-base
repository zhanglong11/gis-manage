(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{222:function(e,t,a){e.exports=a(450)},227:function(e,t,a){},237:function(e,t,a){},296:function(e,t,a){},297:function(e,t,a){},304:function(e,t,a){},382:function(e,t,a){},395:function(e,t,a){},396:function(e,t,a){},441:function(e,t,a){},442:function(e,t,a){},443:function(e,t,a){},444:function(e,t,a){},450:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),s=a(9),i=a.n(s),c=(a(227),a(228),a(214)),r=a(22),o=a(23),m=a(25),u=a(24),d=a(26),p=a(110),y=a(60),h=a(215),v=a.n(h),g=a(14),f=a.n(g),E=(a(230),a(41),a(18)),b=(a(86),a(32)),k=(a(121),a(94)),S=(a(157),a(71)),N=(a(87),a(7)),j=(a(64),a(17)),w=(a(237),localStorage.getItem("gisName")),I=localStorage.getItem("gisPass"),C=localStorage.getItem("isAuto"),D=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={username:"",password:"",isRemember:!1,isAuto:!1},a.login=function(){var e=a.state,t=e.username,n=e.password,l=e.isRemember,s=e.isAuto;a.props.onLogin;t?n?(s&&localStorage.setItem("isLogin","1"),fetch("/main/login/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:n})}).then(function(e){return e.json()}).then(function(e){200===e.code?(l?(localStorage.setItem("gisName",t),localStorage.setItem("gisPass",n)):(localStorage.removeItem("gisName"),localStorage.removeItem("gisPass")),s?localStorage.setItem("isAuto",e.data):localStorage.removeItem("isAuto"),j.a.success(e.message),a.props.history.push({pathname:"/menu"}),localStorage.setItem("token",e.data)):j.a.error(e.message)})):j.a.warn("\u8bf7\u8f93\u5165\u5bc6\u7801"):j.a.warn("\u8bf7\u8f93\u5165\u8d26\u53f7")},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){I&&w&&this.setState({username:w,password:I,isRemember:!0}),C&&this.props.history.push({pathname:"/menu"})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"login-body"},l.a.createElement("div",{className:"login-wrapper"},l.a.createElement("h1",{className:"login-logo"}),l.a.createElement("div",{className:"login-form"},l.a.createElement("div",{className:"login-title"},"\u767b\u5f55"),l.a.createElement("div",{className:"login-form-content"},l.a.createElement(k.a,{placeholder:"\u7528\u6237\u540d",suffix:l.a.createElement(S.a,{title:"Extra information"},l.a.createElement(N.a,{type:"user",style:{color:"rgba(0,0,0,.45)"}})),style:{marginTop:10},size:"large",onChange:function(t){e.setState({username:t.target.value})},value:this.state.username}),l.a.createElement(k.a.Password,{placeholder:"\u5bc6\u7801",suffix:l.a.createElement(S.a,{title:"Extra information"},l.a.createElement(N.a,{type:"user",style:{color:"rgba(0,0,0,.45)"}})),style:{marginTop:10},size:"large",onChange:function(t){e.setState({password:t.target.value})},value:this.state.password}),l.a.createElement("div",{className:"login-form-choose"},l.a.createElement(b.a,{checked:this.state.isRemember,onChange:function(t){e.setState({isRemember:t.target.checked})}},"\u8bb0\u4f4f\u5bc6\u7801"),l.a.createElement(b.a,{checked:this.state.isAuto,onChange:function(t){e.setState({isAuto:t.target.checked})}},"\u81ea\u52a8\u767b\u5f55"))),l.a.createElement(E.a,{type:"primary",size:"large",className:"login-btn",onClick:this.login},"\u767b\u5f55"))))}}]),t}(n.Component),O=(a(151),a(53)),x=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).changeMenu=function(e){a.props.history.push({pathname:"/".concat(e,"project")})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(O.a,null,l.a.createElement(O.a.Grid,{className:"project-card",style:{width:"25%"},onClick:function(){e.changeMenu("bim")}},l.a.createElement("div",{className:"project-item"},l.a.createElement(N.a,{type:"home",style:{fontSize:24}}),l.a.createElement("span",null,"BIM"))),l.a.createElement(O.a.Grid,{className:"project-card",style:{width:"25%"},onClick:function(){e.changeMenu("gis")}},l.a.createElement("div",{className:"project-item"},l.a.createElement(N.a,{type:"home",style:{fontSize:24}}),l.a.createElement("span",null,"GIS")))))}}]),t}(n.Component),T=a(33);function L(e,t){var a=localStorage.getItem("token"),n=new Headers({"Content-Type":"application/json","x-access-token":a});return fetch(e,{method:"POST",headers:n,body:JSON.stringify(t)}).then(function(t){return V(e,t)}).catch(function(t){return console.error("Request failed. Url = ".concat(e," . Message = ").concat(t)),{error:{message:"Request failed."}}})}function V(e,t){return t.status<500?t.json():(console.error("Request failed. Url = ".concat(e," . Message = ").concat(t.statusText)),{error:{message:"Request failed due to server error "}})}var R="/core",P=(a(296),a(30)),M=(a(297),function(e){return l.a.createElement("label",{className:"LabelComp",style:Object(T.a)({},e.labelStyle,{width:e.width,textAlign:e.align?e.align:""})},e.children)});M.displayName="LabelComp",M.defaultProps={labelStyle:{},align:"right",width:100};var Y=M,z=(a(298),a(219)),G=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).change=function(e){var t=a.props.onChange;t&&t(e.target.value)},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(k.a,Object.assign({allowClear:!0},this.props,{style:{width:this.props.width},onChange:function(t){e.change(t)}})))}}]),t}(n.Component);G.defaultProps={width:200};var B=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).change=function(e){var t=a.props.onChange;t&&t(e)},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(z.a,Object.assign({allowClear:!0},this.props,{style:{width:this.props.width},onChange:function(t){e.change(t)}})))}}]),t}(n.Component);B.defaultProps={width:200};a(136);var X=a(61),A=(a(453),a(218)),Z=a(153),F=a.n(Z),W=a(208),q=(a(304),function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={previewVisible:!1,previewImage:"",fileList:[]},a.getBase64=function(e){return new Promise(function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}})},a.handleCancel=function(){return a.setState({previewVisible:!1})},a.handlePreview=function(){var e=Object(W.a)(F.a.mark(function e(t){return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,a.getBase64(t.originFileObj);case 3:t.preview=e.sent;case 4:a.setState({previewImage:t.url||t.preview,previewVisible:!0});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(e){var t=e.fileList;return a.setState({fileList:t})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state,t=e.previewVisible,a=e.previewImage,n=e.fileList,s=l.a.createElement("div",null,l.a.createElement(N.a,{type:"plus"}),l.a.createElement("div",{className:"ant-upload-text"},"Upload"));return l.a.createElement("div",{className:"clearfix"},l.a.createElement(A.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture-card",fileList:n,onPreview:this.handlePreview,onChange:this.handleChange},n.length?null:s),l.a.createElement(X.a,{visible:t,footer:null,onCancel:this.handleCancel},l.a.createElement("img",{alt:"example",style:{width:"100%"},src:a})))}}]),t}(n.Component)),J=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={projectData:[],visible:!1,name:""},a.getData=function(){L("".concat(R,"/gim6d/layerProject/list"),{type:2}).then(function(e){200==e.code&&a.setState({projectData:e.data.records})})},a.addData=function(e){L("".concat(R,"/gim6d/layerProject/add"),Object(T.a)({},e,{type:2})).then(function(e){200==e.code?j.a.success(e.message):j.a.error(e.message)})},a.choosePro=function(e){a.props.history.push({pathname:"/gis",state:{projectId:e}})},a.renderProject=function(){return a.state.projectData.map(function(e){return l.a.createElement(O.a.Grid,{className:"project-card",style:{width:"25%"},onClick:function(){return a.choosePro(e.id)}},l.a.createElement("div",{className:"project-item"},l.a.createElement(N.a,{type:"home",style:{fontSize:24}}),l.a.createElement("span",null,e.name)))})},a.showModal=function(){a.setState({visible:!0})},a.addProject=function(){var e=a.state.name;a.addData({name:e,iconFileId:1})},a.closeModal=function(){a.setState({visible:!1})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(E.a,{type:"primary",onClick:this.showModal},"\u6dfb\u52a0"),l.a.createElement(O.a,null,this.renderProject()),l.a.createElement(P.a,{title:"\u6dfb\u52a0\u9879\u76ee",visible:this.state.visible,onOk:this.addProject,onCancel:this.closeModal,destroyOnClose:!0},l.a.createElement("div",{className:"class-list-content"},l.a.createElement(Y,null,"\u540d\u79f0:"),l.a.createElement(G,{precision:6,value:this.state.name,onChange:function(t){e.setState({name:t})}}))))}}]),t}(n.Component),U=(a(382),function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={projectData:[],visible:!1,name:""},a.getData=function(){L("".concat(R,"/gim6d/layerProject/list"),{type:1}).then(function(e){200==e.code&&a.setState({projectData:e.data.records})})},a.addData=function(e){L("".concat(R,"/gim6d/layerProject/add"),Object(T.a)({},e,{type:1})).then(function(e){200==e.code?j.a.success(e.message):j.a.error(e.message)})},a.choosePro=function(e){a.props.history.push({pathname:"/bim",state:{projectId:e}})},a.renderProject=function(){return a.state.projectData.map(function(e){return l.a.createElement(O.a.Grid,{className:"project-card",style:{width:"25%"},onClick:function(){return a.choosePro(e.id)}},l.a.createElement("div",{className:"project-item"},l.a.createElement(N.a,{type:"home",style:{fontSize:24}}),l.a.createElement("span",null,e.name)))})},a.showModal=function(){a.setState({visible:!0})},a.addProject=function(){var e=a.state.name;a.addData({name:e,iconFileId:1})},a.closeModal=function(){a.setState({visible:!1})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(E.a,{type:"primary",onClick:this.showModal},"\u6dfb\u52a0"),l.a.createElement(O.a,null,this.renderProject()),l.a.createElement(P.a,{title:"\u6dfb\u52a0\u9879\u76ee",visible:this.state.visible,onOk:this.addProject,onCancel:this.closeModal,destroyOnClose:!0},l.a.createElement("div",{className:"class-list-content"},l.a.createElement(Y,null,"\u540d\u79f0:"),l.a.createElement(G,{precision:6,value:this.state.name,onChange:function(t){e.setState({name:t})}})),l.a.createElement("div",{className:"class-list-content",style:{marginTop:10}},l.a.createElement(Y,null,"\u56fe\u7247:"),l.a.createElement(q,null))))}}]),t}(n.Component)),H=(a(190),a(62)),$=(a(191),a(84)),K=(a(192),a(38)),Q=(a(451),a(156)),_=(a(452),a(217)),ee=(a(194),a(44)),te=(a(395),a(396),function(e){return l.a.createElement("div",{className:"load-wrapper ".concat(e.deep?"deep":"")})}),ae=ee.a.Option,ne={width:150,marginLeft:20},le={width:130},se={width:100,marginLeft:8},ie=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={name:"",type:null,pageBaseX:null,pageBaseY:null,blockSize:null,imageBaseSize:null,imageMaxSize:null,isSplit:null,isShirt:null,isGenerateLod:null,lodLevel:null,lodType:null,isSpliceRepeatImage:null,isGenerateShadow:null,isShowDetail:!1,editorIndex:null,detailEditorIndex:null,detailType:"",data:[],handleType:a.props.type,projectId:a.props.projectId,id:a.props.id,pId:a.props.pId,isLoading:!1},a.getData=function(){a.setState({isLoading:!0});var e=a.state.id;L("".concat(R,"/gim6d/layer/get/").concat(e),{}).then(function(e){var t=e.data;t.attribute&&t.attribute.length&&t.attribute.map(function(e){e.ruleData=a.renderRuleData(e)}),a.setState({isLoading:!1,name:t.name,type:t.type,pageBaseX:t.pageBaseX,pageBaseY:t.pageBaseY,blockSize:t.blockSize,imageBaseSize:t.imageBaseSize,imageMaxSize:t.imageMaxSize,isSplit:t.isSplit,isShirt:t.isShirt,isGenerateLod:t.isGenerateLod,lodLevel:t.lodLevel,lodType:t.lodType,isSpliceRepeatImage:t.isSpliceRepeatImage,isGenerateShadow:t.isGenerateShadow,data:t.attribute||[]})})},a.saveData=function(e){var t=a.state,n=t.id,l=t.handleType,s=t.projectId,i=a.props.onGetTree;"modify"==l&&L("".concat(R,"/gim6d/layer/update/").concat(n),Object(T.a)({},e,{projectId:s})).then(function(e){200==e.code?(i&&i(),j.a.success(e.message)):j.a.error(e.message)}),"add"==l&&L("".concat(R,"/gim6d/layer/add"),Object(T.a)({},e,{categoryId:a.state.pId,projectId:s})).then(function(e){200==e.code?(i&&i(),j.a.success(e.message)):j.a.error(e.message)})},a.renderRuleData=function(e){return"string"==e.type?[{name:"\u522b\u540d",value:e.alias,key:"alias",type:"string"},{name:"\u5141\u8bb8\u4e3a\u7a7a",value:e.enableNull,key:"enableNull",type:"boolean"}]:"boolean"==e.type?[{name:"\u522b\u540d",value:e.alias,key:"alias",type:"string"},{name:"\u5141\u8bb8\u4e3a\u7a7a",value:e.enableNull,key:"enableNull",type:"boolean"},{name:"\u9ed8\u8ba4\u503c",value:e.defaultValue,key:"defaultValue",type:"string"},{name:"\u957f\u5ea6",value:e.length,key:"length",type:"number"}]:"byte"==e.type?[{name:"\u522b\u540d",value:e.alias,key:"alias",type:"string"},{name:"\u5141\u8bb8\u4e3a\u7a7a",value:e.enableNull,key:"enableNull",type:"boolean"},{name:"\u9ed8\u8ba4\u503c",value:e.defaultValue,key:"defaultValue",type:"string"}]:"date"==e.type?[{name:"\u522b\u540d",value:e.alias,key:"alias",type:"string"},{name:"\u5141\u8bb8\u4e3a\u7a7a",value:e.enableNull,key:"enableNull",type:"boolean"},{name:"\u9ed8\u8ba4\u503c",value:e.defaultValue,key:"defaultValue",type:"date"}]:"decimal"==e.type?[{name:"\u522b\u540d",value:e.alias,key:"alias",type:"string"},{name:"\u5141\u8bb8\u4e3a\u7a7a",value:e.enableNull,key:"enableNull",type:"boolean"},{name:"\u9ed8\u8ba4\u503c",value:e.defaultValue,key:"defaultValue",type:"decimal"},{name:"\u7cbe\u5ea6",value:e.precision,key:"precision",type:"decimal"}]:"double"==e.type?[{name:"\u522b\u540d",value:e.alias,key:"alias",type:"string"},{name:"\u5141\u8bb8\u4e3a\u7a7a",value:e.enableNull,key:"enableNull",type:"boolean"},{name:"\u9ed8\u8ba4\u503c",value:e.defaultValue,key:"defaultValue",type:"decimal"},{name:"\u7cbe\u5ea6",value:e.precision,key:"precision",type:"number"}]:"int16"==e.type?[{name:"\u522b\u540d",value:e.alias,key:"alias",type:"string"},{name:"\u5141\u8bb8\u4e3a\u7a7a",value:e.enableNull,key:"enableNull",type:"boolean"},{name:"\u9ed8\u8ba4\u503c",value:e.defaultValue,key:"defaultValue",type:"decimal"}]:"int32"==e.type?[{name:"\u522b\u540d",value:e.alias,key:"alias",type:"string"},{name:"\u5141\u8bb8\u4e3a\u7a7a",value:e.enableNull,key:"enableNull",type:"boolean"},{name:"\u9ed8\u8ba4\u503c",value:e.defaultValue,key:"defaultValue",type:"decimal"}]:"int64"==e.type?[{name:"\u522b\u540d",value:e.alias,key:"alias",type:"string"},{name:"\u5141\u8bb8\u4e3a\u7a7a",value:e.enableNull,key:"enableNull",type:"boolean"},{name:"\u9ed8\u8ba4\u503c",value:e.defaultValue,key:"defaultValue",type:"decimal"}]:"single"==e.type?[{name:"\u522b\u540d",value:e.alias,key:"alias",type:"string"},{name:"\u5141\u8bb8\u4e3a\u7a7a",value:e.enableNull,key:"enableNull",type:"boolean"},{name:"\u9ed8\u8ba4\u503c",value:e.defaultValue,key:"defaultValue",type:"decimal"},{name:"\u7cbe\u5ea6",value:e.precision,key:"precision",type:"number"}]:"string"==e.type?[{name:"\u522b\u540d",value:e.alias,key:"alias",type:"string"},{name:"\u5141\u8bb8\u4e3a\u7a7a",value:e.enableNull,key:"enableNull",type:"boolean"},{name:"\u9ed8\u8ba4\u503c",value:e.defaultValue,key:"defaultValue",type:"string"},{name:"\u957f\u5ea6",value:e.length,key:"length",type:"number"}]:"blob"==e.type?[{name:"\u522b\u540d",value:e.alias,key:"alias",type:"string"},{name:"\u5141\u8bb8\u4e3a\u7a7a",value:e.enableNull,key:"enableNull",type:"boolean"}]:"clob"==e.type?[{name:"\u522b\u540d",value:e.alias,key:"alias",type:"string"},{name:"\u5141\u8bb8\u4e3a\u7a7a",value:e.enableNull,key:"enableNull",type:"boolean"}]:"geometry"==e.type?[{name:"\u522b\u540d",value:e.alias,key:"alias",type:"string"},{name:"\u5141\u8bb8\u4e3a\u7a7a",value:e.enableNull,key:"enableNull",type:"boolean"}]:void 0},a.renderColumns=function(){return[{title:"name",dataIndex:"name",width:"30%",render:function(e,t,n){return a.state.editorIndex==n?l.a.createElement(G,{value:e,onChange:function(e){a.changeTableName(e,n)}}):l.a.createElement("span",null,e)}},{title:"type",dataIndex:"type",width:"30%",render:function(e,t,n){return l.a.createElement(ee.a,{allowClear:!0,value:e,style:{width:120},onChange:function(e){a.changeTableVal(e,n)}},l.a.createElement(ae,{value:"int"},"\u5e03\u5c14\u578b"),l.a.createElement(ae,{value:"byte"},"\u5b57\u8282\u578b"),l.a.createElement(ae,{value:"date"},"\u65e5\u671f\u578b"),l.a.createElement(ae,{value:"decimal"},"decimal"),l.a.createElement(ae,{value:"double"},"double"),l.a.createElement(ae,{value:"int16"},"int16"),l.a.createElement(ae,{value:"int32"},"int32"),l.a.createElement(ae,{value:"int64"},"int64"),l.a.createElement(ae,{value:"single"},"single"),l.a.createElement(ae,{value:"string"},"string"),l.a.createElement(ae,{value:"blob"},"blob"),l.a.createElement(ae,{value:"clob"},"clob"),l.a.createElement(ae,{value:"geometry"},"geometry"))}},{title:"handle",dataIndex:"handle",width:"30%",render:function(e,t,n){return l.a.createElement(E.a,{type:"danger",key:n,onClick:function(e){a.delTable(e,n)}},"\u5220\u9664")}}]},a.renderDetailColumns=function(){return[{key:"1",title:"name",dataIndex:"name",width:"50%"},{key:"2",title:"value",dataIndex:"value",width:"50%",render:function(e,t,n){if(a.state.detailEditorIndex!=n)return"boolean"==t.type?l.a.createElement("span",null,1===e?"\u662f":0===e?"\u5426":""):l.a.createElement("span",null,e);switch(t.type){case"string":return l.a.createElement(G,{defaultValue:e,onChange:function(e){a.changeDetailVal(e,n)}});case"number":return l.a.createElement(B,{value:e,onChange:function(e){a.changeDetailVal(e,n)}});case"boolean":return l.a.createElement(ee.a,{style:{width:130},value:0===e||1===e?e:null,onChange:function(e){a.changeDetailVal(e,n)}},l.a.createElement(ae,{value:1},"\u662f"),l.a.createElement(ae,{value:0},"\u5426"));case"date":return l.a.createElement(_.a,{showTime:!0,value:e?f()(e,"YYYY-MM-DD HH:mm"):null,onChange:function(e,t){a.changeDetailVal(t,n)}});case"decimal":return l.a.createElement(B,{precision:6,value:e,onChange:function(e){a.changeDetailVal(e,n)}});default:return l.a.createElement(G,{value:e,onChange:function(e){a.changeDetailVal(e,n)}})}}}]},a.renderDetailData=function(e){var t=a.state,n=t.detailType,l=t.editorIndex,s=t.data;if("rowClick"!=e||!s[l].ruleData.length){"boolean"==n?(s[l].ruleData=[{name:"\u522b\u540d",value:"",key:"alias",type:"string"},{name:"\u5141\u8bb8\u4e3a\u7a7a",value:"",key:"enableNull",type:"boolean"},{name:"\u9ed8\u8ba4\u503c",value:"",key:"defaultValue",type:"string"},{name:"\u957f\u5ea6",value:"",key:"length",type:"number"}],a.setState({data:s})):"byte"==n?(s[l].ruleData=[{name:"\u522b\u540d",value:"",key:"alias",type:"string"},{name:"\u5141\u8bb8\u4e3a\u7a7a",value:"",key:"enableNull",type:"boolean"},{name:"\u9ed8\u8ba4\u503c",value:"",key:"defaultValue",type:"string"}],a.setState({data:s})):"date"==n?(s[l].ruleData=[{name:"\u522b\u540d",value:"",key:"alias",type:"string"},{name:"\u5141\u8bb8\u4e3a\u7a7a",value:"",key:"enableNull",type:"boolean"},{name:"\u9ed8\u8ba4\u503c",value:"",key:"defaultValue",type:"date"}],a.setState({data:s})):"decimal"==n?(s[l].ruleData=[{name:"\u522b\u540d",value:"",key:"alias",type:"string"},{name:"\u5141\u8bb8\u4e3a\u7a7a",value:"",key:"enableNull",type:"boolean"},{name:"\u9ed8\u8ba4\u503c",value:"",key:"defaultValue",type:"decimal"},{name:"\u7cbe\u5ea6",value:"",key:"precision",type:"decimal"}],a.setState({data:s})):"double"==n?(s[l].ruleData=[{name:"\u522b\u540d",value:"",key:"alias",type:"string"},{name:"\u5141\u8bb8\u4e3a\u7a7a",value:"",key:"enableNull",type:"boolean"},{name:"\u9ed8\u8ba4\u503c",value:"",key:"defaultValue",type:"decimal"},{name:"\u7cbe\u5ea6",value:"",key:"precision",type:"number"}],a.setState({data:s})):"int16"==n?(s[l].ruleData=[{name:"\u522b\u540d",value:"",key:"alias",type:"string"},{name:"\u5141\u8bb8\u4e3a\u7a7a",value:"",key:"enableNull",type:"boolean"},{name:"\u9ed8\u8ba4\u503c",value:"",key:"defaultValue",type:"number"}],a.setState({data:s})):"int32"==n?(s[l].ruleData=[{name:"\u522b\u540d",value:"",key:"alias",type:"string"},{name:"\u5141\u8bb8\u4e3a\u7a7a",value:"",key:"enableNull",type:"boolean"},{name:"\u9ed8\u8ba4\u503c",value:"",key:"defaultValue",type:"number"}],a.setState({data:s})):"int64"==n?(s[l].ruleData=[{name:"\u522b\u540d",value:"",key:"alias",type:"string"},{name:"\u5141\u8bb8\u4e3a\u7a7a",value:"",key:"enableNull",type:"boolean"},{name:"\u9ed8\u8ba4\u503c",value:"",key:"defaultValue",type:"number"}],a.setState({data:s})):"single"==n?(s[l].ruleData=[{name:"\u522b\u540d",value:"",key:"alias",type:"string"},{name:"\u5141\u8bb8\u4e3a\u7a7a",value:"",key:"enableNull",type:"boolean"},{name:"\u9ed8\u8ba4\u503c",value:"",key:"defaultValue",type:"decimal"},{name:"\u7cbe\u5ea6",value:"",key:"precision",type:"number"}],a.setState({data:s})):"string"==n?(s[l].ruleData=[{name:"\u522b\u540d",value:"",key:"alias",type:"string"},{name:"\u5141\u8bb8\u4e3a\u7a7a",value:"",key:"enableNull",type:"boolean"},{name:"\u9ed8\u8ba4\u503c",value:"",key:"defaultValue",type:"string"},{name:"\u957f\u5ea6",value:"",key:"length",type:"number"}],a.setState({data:s})):"blob"==n?(s[l].ruleData=[{name:"\u522b\u540d",value:"",key:"alias",type:"string"},{name:"\u5141\u8bb8\u4e3a\u7a7a",value:"",key:"enableNull",type:"boolean"}],a.setState({data:s})):"clob"==n?(s[l].ruleData=[{name:"\u522b\u540d",value:"",key:"alias",type:"string"},{name:"\u5141\u8bb8\u4e3a\u7a7a",value:"",key:"enableNull",type:"boolean"}],a.setState({data:s})):"geometry"==n&&(s[l].ruleData=[{name:"\u522b\u540d",value:"",key:"alias",type:"string"},{name:"\u5141\u8bb8\u4e3a\u7a7a",value:"",key:"enableNull",type:"boolean"}],a.setState({data:s})),null!=l&&void 0!=l||a.setState({ruleData:[]})}},a.onRowClick=function(e,t){a.setState({editorIndex:t,detailType:e.type},function(){a.renderDetailData("rowClick")}),e.type&&e.name&&a.setState({isShowDetail:!0})},a.onDetailRowClick=function(e,t){a.setState({detailEditorIndex:t})},a.changeTableName=function(e,t){var n=a.state.data;n[t].type&&e?a.setState({isShowDetail:!0}):a.setState({isShowDetail:!1}),n[t].name=e,a.setState({data:n})},a.changeTableVal=function(e,t){var n=a.state.data;n[t].name&&e?a.setState({isShowDetail:!0}):a.setState({isShowDetail:!1}),n[t].type=e,a.setState({data:n,detailType:e},function(){a.renderDetailData("1")})},a.changeDetailVal=function(e,t){var n=a.state,l=n.data;l[n.editorIndex].ruleData[t].value=e,a.setState({data:l})},a.addTable=function(){var e=a.state.data;e.push({name:"",type:"boolean",ruleData:[]}),a.setState({data:e})},a.delTable=function(e,t){e.stopPropagation();var n=a.state,l=n.data;n.editorIndex==t&&a.setState({editorIndex:null}),l.splice(t,1),a.setState({data:l})},a.save=function(){var e=a.state,t=e.name,n=e.type,l=e.pageBaseX,s=e.pageBaseY,i=e.blockSize,c=e.imageBaseSize,r=e.imageMaxSize,o=e.isSplit,m=e.isShirt,u=e.isGenerateLod,d=e.lodLevel,p=e.lodType,y=e.isSpliceRepeatImage,h=e.isGenerateShadow,v=e.data,g=[];v&&v.length&&v.map(function(e){var t={};t.name=e.name,t.type=e.type,e.ruleData.length&&e.ruleData.map(function(e){t[e.key]=e.value}),g.push(t)}),t?a.saveData({name:t,type:n,pageBaseX:l,pageBaseY:s,blockSize:i,imageBaseSize:c,imageMaxSize:r,isSplit:o,isShirt:m,isGenerateLod:u,lodLevel:d,lodType:p,isSpliceRepeatImage:y,isGenerateShadow:h,attribute:g}):j.a.error("\u8bf7\u8f93\u5165\u540d\u79f0")},a.changeCategory=function(e){console.log(e)},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){"modify"==this.state.handleType&&this.getData()}},{key:"componentWillReceiveProps",value:function(e,t){var a=this;this.props.id!=e.id&&"modify"==e.type&&this.setState({id:e.id,editorIndex:null},function(){a.getData()}),this.props.pId!=e.pId&&this.setState({pId:e.pId}),this.props.type!=e.type&&this.setState({handleType:e.type}),this.props.type!=e.type&&this.setState({handleType:e.type})}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLoading,n=t.data,s=t.editorIndex,i=t.type,c=t.pageBaseX,r=t.pageBaseY,o=t.blockSize,m=t.imageBaseSize,u=t.imageMaxSize,d=t.isSplit,p=t.isShirt,y=t.isGenerateLod,h=t.lodLevel,v=t.lodType,g=t.isSpliceRepeatImage,f=t.isGenerateShadow;return a?l.a.createElement(te,null):l.a.createElement("div",{className:"class-wrapper"},l.a.createElement("h3",{className:"class-title"},"\u8981\u7d20\u7c7b"),l.a.createElement("div",{className:"class-list"},l.a.createElement("h6",{className:"class-list-title"},"\u5e38\u89c4"),l.a.createElement("div",{className:"class-list-item"},l.a.createElement("div",{className:"class-list-content"},l.a.createElement(Y,null,"\u540d\u79f0:"),l.a.createElement(G,{value:this.state.name,onChange:function(t){e.setState({name:t})}})),l.a.createElement("div",{className:"class-list-content"},l.a.createElement(Y,null,"\u7c7b\u522b:"),l.a.createElement(ee.a,{style:{width:140},allowClear:!0,value:i,onChange:function(t){e.setState({type:t})}},l.a.createElement(ae,{value:0},"\u7b80\u5355\u8981\u7d20\u7c7b"),l.a.createElement(ae,{value:1},"\u70b9"),l.a.createElement(ae,{value:2},"\u7ebf"),l.a.createElement(ae,{value:3},"\u591a\u8fb9\u5f62"),l.a.createElement(ae,{value:4},"\u591a\u70b9"),l.a.createElement(ae,{value:5},"\u591a\u7ebf"),l.a.createElement(ae,{value:6},"\u591a\u591a\u8fb9\u5f62"),l.a.createElement(ae,{value:7},"\u591a\u56fe\u5143"),l.a.createElement(ae,{value:10},"\u5f27\u7ebf"),l.a.createElement(ae,{value:11},"\u5f27\u9762"),l.a.createElement(ae,{value:12},"\u591a\u5f27\u7ebf"),l.a.createElement(ae,{value:13},"\u591a\u5f27\u9762"),l.a.createElement(ae,{value:14},"\u4e09\u7ef4\u8981\u7d20\u7c7b"),l.a.createElement(ae,{value:15},"\u4e09\u7ef4\u5206\u9875\u6a21\u578b"),l.a.createElement(ae,{value:16},"\u4e09\u7ef4\u5f71\u50cf"),l.a.createElement(ae,{value:17},"\u4e09\u7ef4\u7ba1\u70b9"),l.a.createElement(ae,{value:18},"\u4e09\u7ef4\u7ba1\u7ebf"))))),l.a.createElement("div",{className:"class-list"},l.a.createElement("h6",{className:"class-list-title"},"\u5b57\u6bb5"),l.a.createElement("div",{className:"class-list-item"},l.a.createElement(E.a,{type:"primary",onClick:this.addTable},"\u6dfb\u52a0")),l.a.createElement("div",{className:"class-list-item"},l.a.createElement(Q.a,{scroll:{y:240},style:{width:"100%"},dataSource:n,columns:this.renderColumns(),pagination:!1,onRowClick:function(t,a){e.onRowClick(t,a)}})),l.a.createElement("div",{className:"class-list-item"},this.state.isShowDetail&&n.length?l.a.createElement(Q.a,{style:{width:"100%"},dataSource:null!=s&&n?n[s].ruleData:[],columns:this.renderDetailColumns(),pagination:!1,onRowClick:function(t,a){e.onDetailRowClick(t,a)}}):null)),l.a.createElement("div",{className:"class-list",style:{flex:1}},l.a.createElement("h6",{className:"class-list-title"},"\u5206\u9875\u4fe1\u606f"),l.a.createElement("div",{className:"class-list-item"},l.a.createElement("div",{className:"class-list-content"},l.a.createElement(Y,{align:"left"},"\u5206\u9875\u57fa\u70b9X:"),l.a.createElement(B,{precision:6,value:c,onChange:function(t){e.setState({pageBaseX:t})}})),l.a.createElement("div",{className:"class-list-content"},l.a.createElement(Y,{align:"left"},"\u5206\u9875\u57fa\u70b9Y:"),l.a.createElement(B,{precision:6,value:r,onChange:function(t){e.setState({pageBaseY:t})}})),l.a.createElement("div",{className:"class-list-content"},l.a.createElement(Y,{align:"left"},"\u5757\u5927\u5c0f:"),l.a.createElement(B,{precision:6,value:o,onChange:function(t){e.setState({blockSize:t})}}))),l.a.createElement("div",{className:"class-list-item"},l.a.createElement("div",{className:"class-list-content"},l.a.createElement(Y,{align:"left",width:160},"\u8d28\u68c0\u56fe\u7247\u7684\u57fa\u7840\u5927\u5c0f:"),l.a.createElement(ee.a,{style:{width:140},allowClear:!0,value:m,onChange:function(t){e.setState({imageBaseSize:t})}},l.a.createElement(ae,{value:64},"64*64"),l.a.createElement(ae,{value:128},"128*128"),l.a.createElement(ae,{value:256},"256*256"),l.a.createElement(ae,{value:512},"512*512"),l.a.createElement(ae,{value:1024},"1024*1024"))),l.a.createElement("div",{className:"class-list-content"},l.a.createElement(Y,{align:"left",width:160},"\u8d28\u68c0\u56fe\u7247\u7684\u6700\u5927\u5927\u5c0f:"),l.a.createElement(ee.a,{style:{width:140},allowClear:!0,value:u,onChange:function(t){e.setState({imageMaxSize:t})}},l.a.createElement(ae,{value:64},"64*64"),l.a.createElement(ae,{value:128},"128*128"),l.a.createElement(ae,{value:256},"256*256"),l.a.createElement(ae,{value:512},"512*512"),l.a.createElement(ae,{value:1024},"1024*1024")))),l.a.createElement("div",{className:"class-list-item"},l.a.createElement(b.a,{style:ne,checked:d,onChange:function(t){e.setState({isSplit:t.target.checked?1:0})}},"\u662f\u5426\u5207\u5272"),l.a.createElement(b.a,{style:le,onChange:function(t){e.setState({isShirt:t.target.checked?1:0})},disabled:!d,checked:d&&p},"\u662f\u5426\u52a0\u88d9\u8fb9")),l.a.createElement("div",{className:"class-list-item"},l.a.createElement(b.a,{style:ne,checked:y,onChange:function(t){e.setState({isGenerateLod:t.target.checked?1:0,lodLevel:null,lodType:null})}},"\u4ea7\u751f3\u7ea7LOD"),l.a.createElement(K.a.Group,{name:"LodType",value:h,onChange:function(t){e.setState({lodLevel:t.target.value})}},l.a.createElement(K.a,{style:se,value:0,disabled:!y},"0\u7ea7"),l.a.createElement(K.a,{style:se,value:1,disabled:!y},"1\u7ea7"),l.a.createElement(K.a,{style:se,value:2,disabled:!y},"2\u7ea7"))),l.a.createElement("div",{className:"class-list-item"},l.a.createElement(K.a.Group,{name:"radiogroup",value:v,onChange:function(t){e.setState({lodType:t.target.value})}},l.a.createElement(K.a,{style:{marginLeft:178,width:100},value:1,disabled:!y},"2\u7ea7LOD"),l.a.createElement(K.a,{style:se,value:2,disabled:!y},"\u6a21\u578b\u5206\u79bb"),l.a.createElement(K.a,{style:se,value:3,disabled:!y},"3\u7ea7LOD"),l.a.createElement(K.a,{style:se,value:4,disabled:!y},"\u5b9e\u4f8b\u5316LOD"))),l.a.createElement("div",{className:"class-list-item"},l.a.createElement(b.a,{style:ne,checked:g,onChange:function(t){e.setState({isSpliceRepeatImage:t.target.checked?1:0})}},"\u91cd\u65b0\u8d34\u56fe\u62fc\u63a5"),l.a.createElement(b.a,{style:le,checked:f,onChange:function(t){e.setState({isGenerateShadow:t.target.checked?1:0})}},"\u4ea7\u751f\u9634\u5f71")),l.a.createElement("div",{className:"class-btn"},l.a.createElement(E.a,{type:"primary",onClick:this.save},"\u4fdd\u5b58"))))}}]),t}(n.Component),ce=(a(441),function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={name:"",allowance:"",minX:"",maxX:"",minY:"",maxY:"",minZ:"",maxZ:"",longitude:"",latitude:"",type:"",projectId:a.props.projectId,handleType:a.props.type,id:a.props.id,pId:a.props.pId,isLoading:!1},a.reset=function(){a.setState({name:"",allowance:"",minX:"",maxX:"",minY:"",maxY:"",minZ:"",maxZ:"",longitude:"",latitude:""})},a.getData=function(){a.setState({isLoading:!0});var e=a.state.id;L("".concat(R,"/gim6d/layerCategory/get/").concat(e),{}).then(function(e){var t=e.data;a.setState({isLoading:!1,name:t.name,type:t.type,allowance:t.allowance,minX:t.minX,maxX:t.maxX,minY:t.minY,maxY:t.maxY,minZ:t.minZ,maxZ:t.maxZ,longitude:t.longitude,latitude:t.latitude})})},a.saveData=function(e){var t=a.state,n=t.id,l=t.handleType,s=t.pId,i=t.projectId,c=a.props.onGetTree;"modify"==l&&L("".concat(R,"/gim6d/layerCategory/update/").concat(n),e).then(function(e){200==e.code?(c&&c(),j.a.success(e.message)):j.a.error(e.message)}),"add"==l&&L("".concat(R,"/gim6d/layerCategory/add"),Object(T.a)({},e,{pid:s,projectId:i})).then(function(e){200==e.code?(c&&c(),j.a.success(e.message)):j.a.error(e.message)})},a.save=function(){var e=a.state,t=e.name,n=e.allowance,l=e.minX,s=e.maxX,i=e.minY,c=e.maxY,r=e.minZ,o=e.maxZ,m=e.longitude,u=e.latitude;t?a.saveData({name:t,allowance:n,minX:l,maxX:s,minY:i,maxY:c,minZ:r,maxZ:o,longitude:m,latitude:u}):j.a.error("\u8bf7\u8f93\u5165\u540d\u79f0")},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){"modify"==this.state.handleType&&this.getData()}},{key:"componentWillReceiveProps",value:function(e,t){var a=this;this.props.id!=e.id&&"modify"==e.type&&this.setState({id:e.id},function(){a.getData()}),this.props.pId!=e.pId&&this.setState({pId:e.pId}),this.props.type!=e.type&&this.setState({handleType:e.type}),"add"==e.type&&this.reset()}},{key:"render",value:function(){var e=this;return this.state.isLoading?l.a.createElement(te,null):l.a.createElement("div",{className:"class-wrapper"},l.a.createElement("h3",{className:"class-title"},"\u8981\u7d20\u6570\u636e\u96c6"),l.a.createElement("div",{className:"class-list"},l.a.createElement("h6",{className:"class-list-title"},"\u5e38\u89c4"),l.a.createElement("div",{className:"class-list-item"},l.a.createElement("div",{className:"class-list-content"},l.a.createElement(Y,null,"\u540d\u79f0:"),l.a.createElement(G,{value:this.state.name,onChange:function(t){e.setState({name:t})}})))),l.a.createElement("div",{className:"class-list"},l.a.createElement("h6",{className:"class-list-title"},"\u7cbe\u5ea6"),l.a.createElement("div",{className:"class-list-item"},l.a.createElement("div",{className:"class-list-content"},l.a.createElement(Y,null,"\u5bb9\u5dee:"),l.a.createElement(B,{precision:6,value:this.state.allowance,onChange:function(t){e.setState({allowance:t})}})))),l.a.createElement("div",{className:"class-list"},l.a.createElement("h6",{className:"class-list-title"},"\u8303\u56f4"),l.a.createElement("div",{className:"class-list-item"},l.a.createElement("div",{className:"class-list-content"},l.a.createElement(Y,null,"X\u6700\u5c0f\u503c:"),l.a.createElement(B,{precision:6,value:this.state.minX,onChange:function(t){e.setState({minX:t})}})),l.a.createElement("div",{className:"class-list-content"},l.a.createElement(Y,null,"X\u6700\u5927\u503c:"),l.a.createElement(B,{precision:6,value:this.state.maxX,onChange:function(t){e.setState({maxX:t})}}))),l.a.createElement("div",{className:"class-list-item"},l.a.createElement("div",{className:"class-list-content"},l.a.createElement(Y,null,"Y\u6700\u5c0f\u503c:"),l.a.createElement(B,{precision:6,width:200,value:this.state.minY,onChange:function(t){e.setState({minY:t})}})),l.a.createElement("div",{className:"class-list-content"},l.a.createElement(Y,null,"Y\u6700\u5927\u503c:"),l.a.createElement(B,{precision:6,width:200,value:this.state.maxY,onChange:function(t){e.setState({maxY:t})}}))),l.a.createElement("div",{className:"class-list-item"},l.a.createElement("div",{className:"class-list-content"},l.a.createElement(Y,null,"Z\u6700\u5c0f\u503c:"),l.a.createElement(B,{precision:6,value:this.state.minZ,onChange:function(t){e.setState({minZ:t})}})),l.a.createElement("div",{className:"class-list-content"},l.a.createElement(Y,null,"Z\u6700\u5927\u503c:"),l.a.createElement(B,{precision:6,value:this.state.maxZ,onChange:function(t){e.setState({maxZ:t})}})))),l.a.createElement("div",{className:"class-list",style:{flex:1}},l.a.createElement("h6",{className:"class-list-title"},"\u7ecf\u7eac\u5ea6"),l.a.createElement("div",{className:"class-list-item"},l.a.createElement("div",{className:"class-list-content"},l.a.createElement(Y,null,"\u7ecf\u5ea6:"),l.a.createElement(B,{precision:6,value:this.state.longitude,onChange:function(t){e.setState({longitude:t})}})),l.a.createElement("div",{className:"class-list-content"},l.a.createElement(Y,null,"\u7eac\u5ea6:"),l.a.createElement(B,{precision:6,value:this.state.latitude,onChange:function(t){e.setState({latitude:t})}}))),l.a.createElement("div",{className:"class-btn"},l.a.createElement(E.a,{type:"primary",onClick:this.save},"\u4fdd\u5b58"))))}}]),t}(n.Component)),re=(a(442),$.a.TreeNode),oe=H.a.Content,me=H.a.Sider,ue=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={treeData:[],id:null,pId:0,key:"set",addClass:!1,defaultId:null,projectId:a.props.location.state?a.props.location.state.projectId:null},a.getData=function(){var e=a.state.projectId;a.setState({treeData:[]}),L("".concat(R,"/gim6d/layerCategory/").concat(e,"/tree"),{}).then(function(e){200==e.code&&a.setState({treeData:e.data})})},a.selectTree=function(e,t){var n=t.node.props.dataRef,l=n.isLayer,s=n.id;e.length?l?a.setState({isLayer:!0,id:s,key:"class",type:"modify",pId:s}):a.setState({isLayer:!1,id:s,key:"set",type:"modify",pId:s}):a.setState({pId:0,isLayer:!1})},a.add=function(){var e=a.state,t=e.pId,n=e.addClass;e.isLayer?X.a.warning({title:"\u63d0\u793a",content:"\u5f53\u524d\u76ee\u5f55\u4e0b\u4e0d\u80fd\u65b0\u5efa"}):!n||t?n?a.setState({type:"add",key:"class",pId:t}):a.setState({type:"add",key:"set",pId:t}):X.a.warning({title:"\u63d0\u793a",content:"\u5f53\u524d\u76ee\u5f55\u4e0b\u4e0d\u80fd\u65b0\u5efa\u8981\u7d20\u7c7b"})},a.renderTreeNodes=function(e){return e.map(function(e){return e.children?l.a.createElement(re,{title:e.name,key:e.key,dataRef:e},a.renderTreeNodes(e.children)):l.a.createElement(re,Object.assign({},e,{title:e.name,dataRef:e}))})},a.modify=function(e){console.log(e.node.props)},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this,t=this.state,a=t.treeData;t.defaultId;return l.a.createElement(H.a,{style:{height:"100%"}},l.a.createElement(me,{theme:"light"},l.a.createElement("div",{className:"main-logo-wrapper"},l.a.createElement("h1",{className:"main-logo"})),l.a.createElement("div",{className:"main-btn-wrapper"},l.a.createElement(E.a,{type:"primary",style:{width:100},onClick:this.add},"\u65b0\u5efa")),l.a.createElement("div",{className:"main-check-wrapper"},l.a.createElement(b.a,{onChange:function(t){e.setState({addClass:t.target.checked})}},"\u65b0\u5efa\u8981\u7d20\u7c7b")),a.length?l.a.createElement($.a,{showLine:!0,onSelect:this.selectTree,onRightClick:this.modify,defaultExpandAll:!0},this.renderTreeNodes(a)):null),l.a.createElement(oe,{style:{padding:"0 16px",height:"100%",position:"relative"}},"class"==this.state.key?l.a.createElement(ie,{id:this.state.id,pId:this.state.pId,type:this.state.type,projectId:this.state.projectId,onGetTree:this.getData}):l.a.createElement(ce,{id:this.state.id,pId:this.state.pId,type:this.state.type,projectId:this.state.projectId,onGetTree:this.getData})))}}]),t}(n.Component),de=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={name:"",version:"",projectId:a.props.projectId,handleType:a.props.type,id:a.props.id,pId:a.props.pId,isLoading:!1},a.reset=function(){a.setState({name:"",version:""})},a.getData=function(){a.setState({isLoading:!0});var e=a.state.id;L("".concat(R,"/gim/model/get/").concat(e),{}).then(function(e){var t=e.data;a.setState({isLoading:!1,name:t.name,version:t.version})})},a.saveData=function(e){var t=a.state,n=t.id,l=t.handleType,s=t.pId,i=t.projectId,c=a.props.onGetTree;"modify"==l&&L("".concat(R,"/gim/model/update"),Object(T.a)({},e,{id:n,projectId:i})).then(function(e){200==e.code?(c&&c(),j.a.success(e.message)):j.a.error(e.message)}),"add"==l&&L("".concat(R,"/gim/model/add"),Object(T.a)({},e,{categoryId:s,projectId:i})).then(function(e){200==e.code?(c&&c(),j.a.success(e.message)):j.a.error(e.message)})},a.save=function(){var e=a.state,t=e.name,n=e.version;t?a.saveData({name:t,version:n}):j.a.error("\u8bf7\u8f93\u5165\u540d\u79f0")},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){"modify"==this.state.handleType&&this.getData()}},{key:"componentWillReceiveProps",value:function(e,t){var a=this;this.props.id!=e.id&&"modify"==e.type&&this.setState({id:e.id,pId:e.id},function(){a.getData()}),this.props.type!=e.type&&this.setState({handleType:e.type}),"add"==e.type&&this.reset()}},{key:"render",value:function(){var e=this;return this.state.isLoading?l.a.createElement(te,null):l.a.createElement("div",{className:"class-wrapper"},l.a.createElement("h3",{className:"class-title"},"\u5355\u4f53"),l.a.createElement("div",{className:"class-list"},l.a.createElement("h6",{className:"class-list-title"},"\u5e38\u89c4"),l.a.createElement("div",{className:"class-list-item"},l.a.createElement("div",{className:"class-list-content"},l.a.createElement(Y,null,"\u540d\u79f0:"),l.a.createElement(G,{value:this.state.name,onChange:function(t){e.setState({name:t})}})),l.a.createElement("div",{className:"class-list-content"},l.a.createElement(Y,null,"\u7248\u672c:"),l.a.createElement(B,{value:this.state.version,onChange:function(t){e.setState({version:t})}}))),l.a.createElement("div",{className:"class-btn"},l.a.createElement(E.a,{type:"primary",onClick:this.save},"\u4fdd\u5b58"))))}}]),t}(n.Component),pe=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={name:"",version:"",projectId:a.props.projectId,handleType:a.props.type,id:a.props.id,pId:a.props.pId,isLoading:!1},a.reset=function(){a.setState({name:""})},a.getData=function(){a.setState({isLoading:!0});var e=a.state.id;L("".concat(R,"/gim/modelCategory/get/").concat(e),{}).then(function(e){var t=e.data;a.setState({isLoading:!1,name:t.name})})},a.saveData=function(e){var t=a.state,n=t.id,l=t.handleType,s=t.pId,i=t.projectId,c=a.props.onGetTree;"modify"==l&&L("".concat(R,"/gim/modelCategory/update"),Object(T.a)({},e,{id:n,projectId:i})).then(function(e){200==e.code?(c&&c(),j.a.success(e.message)):j.a.error(e.message)}),"add"==l&&L("".concat(R,"/gim/modelCategory/add"),Object(T.a)({},e,{pid:s,projectId:i})).then(function(e){200==e.code?(c&&c(),j.a.success(e.message)):j.a.error(e.message)})},a.save=function(){var e=a.state,t=e.name;e.pId,e.projectId;a.saveData({name:t})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){"modify"==this.state.handleType&&this.getData()}},{key:"componentWillReceiveProps",value:function(e,t){var a=this;this.props.id!=e.id&&"modify"==e.type&&this.setState({id:e.id,pId:e.id},function(){a.getData()}),this.props.type!=e.type&&this.setState({handleType:e.type}),"add"==e.type&&this.reset()}},{key:"render",value:function(){var e=this;return this.state.isLoading?l.a.createElement(te,null):l.a.createElement("div",{className:"class-wrapper"},l.a.createElement("h3",{className:"class-title"},"\u5206\u7c7b"),l.a.createElement("div",{className:"class-list"},l.a.createElement("h6",{className:"class-list-title"},"\u5e38\u89c4"),l.a.createElement("div",{className:"class-list-item"},l.a.createElement("div",{className:"class-list-content"},l.a.createElement(Y,null,"\u540d\u79f0:"),l.a.createElement(G,{value:this.state.name,onChange:function(t){e.setState({name:t})}}))),l.a.createElement("div",{className:"class-btn"},l.a.createElement(E.a,{type:"primary",onClick:this.save},"\u4fdd\u5b58"))))}}]),t}(n.Component),ye=(a(443),$.a.TreeNode),he=H.a.Content,ve=H.a.Sider,ge=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={treeData:[],id:null,pId:0,key:"folder",addFolder:!1,defaultId:null,projectId:a.props.location.state?a.props.location.state.projectId:null},a.getData=function(){var e=a.state.projectId;a.setState({treeData:[]}),L("".concat(R,"/gim/modelCategory/").concat(e,"/tree"),{}).then(function(e){200==e.code&&a.setState({treeData:e.data})})},a.selectTree=function(e,t){var n=t.node.props.dataRef,l=n.isModel,s=n.id;e.length?l?a.setState({isFolder:!1,id:s,key:"one",type:"modify",pId:s}):a.setState({isFolder:!0,id:s,key:"folder",type:"modify",pId:s}):a.setState({isFolder:null,id:null,key:"folder",type:null,pId:0})},a.add=function(){var e=a.state,t=e.pId,n=e.addFolder;0!=e.isFolder?n||t?n?a.setState({type:"add",key:"folder",pId:t}):a.setState({type:"add",key:"one",pId:t}):X.a.warning({title:"\u63d0\u793a",content:"\u5f53\u524d\u76ee\u5f55\u4e0b\u4e0d\u80fd\u65b0\u5efa\u5355\u4f53"}):X.a.warning({title:"\u63d0\u793a",content:"\u5f53\u524d\u76ee\u5f55\u4e0b\u4e0d\u80fd\u65b0\u5efa"})},a.renderTreeNodes=function(e){return e.map(function(e){return e.children?l.a.createElement(ye,{title:e.name,key:e.key,dataRef:e},a.renderTreeNodes(e.children)):l.a.createElement(ye,Object.assign({},e,{title:e.name,dataRef:e}))})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this,t=this.state.treeData;return l.a.createElement(H.a,{style:{height:"100%"}},l.a.createElement(ve,{theme:"light"},l.a.createElement("div",{className:"main-logo-wrapper"},l.a.createElement("h1",{className:"main-logo"})),l.a.createElement("div",{className:"main-btn-wrapper"},l.a.createElement(E.a,{type:"primary",style:{width:100},onClick:this.add},"\u65b0\u5efa")),l.a.createElement("div",{className:"main-check-wrapper"},l.a.createElement(b.a,{onChange:function(t){e.setState({addFolder:t.target.checked})}},"\u65b0\u5efa\u6587\u4ef6\u5939")),t.length?l.a.createElement($.a,{showLine:!0,onSelect:this.selectTree,defaultExpandAll:!0},this.renderTreeNodes(t)):null),l.a.createElement(he,{style:{padding:"0 16px",height:"100%",position:"relative"}},"folder"==this.state.key?l.a.createElement(pe,{id:this.state.id,pId:this.state.pId,type:this.state.type,projectId:this.state.projectId,onGetTree:this.getData}):l.a.createElement(de,{id:this.state.id,pId:this.state.pId,type:this.state.type,projectId:this.state.projectId,onGetTree:this.getData})))}}]),t}(n.Component);a(444);f.a.locale("zh-cn");var fe=function(e){function t(){return Object(r.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement(c.a,{locale:v.a},l.a.createElement(p.a,null,l.a.createElement(y.a,{exact:!0,path:"/",component:D}),l.a.createElement(y.a,{path:"/menu",component:x}),l.a.createElement(y.a,{path:"/gisProject",component:J}),l.a.createElement(y.a,{path:"/bimProject",component:U}),l.a.createElement(y.a,{path:"/gis",component:ue}),l.a.createElement(y.a,{path:"/bim",component:ge})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(fe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[222,1,2]]]);
//# sourceMappingURL=main.f3d57f57.chunk.js.map